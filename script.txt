<script>
  import { goto } from '$app/navigation';
  import { onMount } from 'svelte';

  let users = [];

  onMount(async () => {
    const response = await fetch('http://localhost:8000/admin/users/');
    users = await response.json();
  });

  async function updateUser(userId) {
    // Appel API pour récupérer les détails de l'utilisateur
    const response = await fetch(`http://localhost:8000/admin/users/${userId}`);
    const userDetails = await response.json();

    // Rediriger vers la page de mise à jour avec les détails de l'utilisateur
    // Vous pouvez utiliser les props de page ou une solution de gestion d'état global comme $session
    goto(`/Admin/create-user`, { state: { userDetails } });
  }
</script>

<table>
  <!-- ... -->
  {#each users as user}
    <tr>
      <!-- ... autres cellules ... -->
      <td><button on:click={() => updateUser(user.id)}>Update</button></td>
    </tr>
  {/each}
</table>
