<script>
  let searchQuery = '';
  let users = [];
  let isSearching = false;

  async function searchUsers() {
    if (searchQuery.trim().length === 0) {
      users = [];
      return;
    }

    isSearching = true;
    try {
      const response = await fetch(`http://localhost:3000/search?q=${encodeURIComponent(searchQuery)}`);
      if (response.ok) {
        users = await response.json();
      } else {
        console.error('Error fetching users:', response.statusText);
        users = [];
      }
    } catch (error) {
      console.error('Network error:', error);
      users = [];
    }
    isSearching = false;
  }
</script>

<div class="search-bar-container">
  <input
    class="search-input"
    type="text"
    placeholder="Search users..."
    bind:value={searchQuery}
    on:input={searchUsers} />
  <!-- Vous pouvez Ã©galement utiliser on:keyup pour lancer la recherche lorsqu'un utilisateur tape -->
  {#if isSearching}
    <p>Searching...</p>
  {/if}
</div>

{#if users.length > 0}
  <ul>
    {#each users as user}
      <li>{user.full_name}</li>
    {/each}
  </ul>
{/if}

<style>
  /* Vos styles ici */
</style>
