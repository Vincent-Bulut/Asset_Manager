
import os
import sys
from alembic import context

# Calcul du chemin du dossier parent de 'backend' (si 'env.py' est dans 'backend/alembic')
parent_dir = os.path.dirname(os.path.dirname(os.path.realpath(__file__)))
# Ajoute le dossier 'database' au sys.path
sys.path.insert(0, os.path.join(parent_dir, 'backend', 'database'))

# Maintenant tu peux importer tes modules de 'database'
from base import Base  # ajuste l'importation selon la structure réelle

# Configuration existante d'Alembic
config = context.config
fileConfig(config.config_file_name)
target_metadata = Base.metadata

def run_migrations_offline():
    # détails omis pour la brièveté
    pass

def run_migrations_online():
    # détails omis pour la brièveté
    pass

# Exécution de la migration
if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()