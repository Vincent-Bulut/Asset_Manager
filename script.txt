<script>
  let utUser = '';
  let role = '';
  let email = '';
  let fullName = '';
  let startDate = '';
  let disabled = '';

  async function handleSubmit() {
    // Vérifiez les champs ici ...
    // Si tout est valide, envoyez une requête POST à votre API
    try {
      const response = await fetch('http://localhost:8000/admin/users/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          ut: utUser,
          role: role,
          email: email,
          full_name: fullName,
          start_date: startDate,
          disabled: disabled === 'true'
        })
      });

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      // Handle your response here
      console.log("User created successfully", await response.json());
    } catch (error) {
      console.error("Error creating user", error);
    }
  }
</script>

<form on:submit|preventDefault={handleSubmit}>
  <!-- ... Votre formulaire avec les champs et les validations ... -->
  <button type="submit">Create User</button>
</form>
