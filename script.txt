<script>
  import { onMount } from 'svelte';
  import axios from 'axios'; // Assurez-vous d'installer axios avec npm ou yarn

  let users = [];

  onMount(async () => {
    const response = await axios.get('http://localhost:8000/admin/users');
    users = response.data;
  });
</script>

<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Full Name</th>
      <th>Role</th>
      <th>Disabled</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {#each users as user}
      <tr>
        <td>{user.ut}</td>
        <td>{user.full_name}</td>
        <td>{user.role}</td>
        <td>{user.disabled ? 'true' : 'false'}</td>
        <td><button on:click={() => updateAction(user)}>Update</button></td>
      </tr>
    {/each}
  </tbody>
</table>

<script>
  function updateAction(user) {
    // Logique pour gérer l'action de mise à jour
    console.log('Updating user', user);
  }
</script>
