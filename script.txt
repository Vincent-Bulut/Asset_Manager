
def update_trd_time(self, req: TraderTimeModel):
    ts = utils.get_current_timestamp()
    # Assuming TraderTimes is a mapped class and not a Table object
    objects_to_update = self.session.query(TraderTimes).filter(
        TraderTimes.id_trader == req.id_trader,
        TraderTimes.id_structure == req.id_structure,
        TraderTimes.time_month == req.time_month,
        TraderTimes.time_year == req.time_year
    )

    # Batch update values
    objects_to_update.update({
        TraderTimes.time_value: req.time_value,
        TraderTimes.timestamp: ts
    }, synchronize_session=False)  # Use `False` or 'fetch' if youâ€™re not worried about the session being out of date with the database.

    self.session.commit()