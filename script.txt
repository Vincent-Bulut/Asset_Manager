
<script>
  import { onMount } from 'svelte';

  let data = {
    string: 1,
    azerty: 0.5,
    testtt: 0.5,
    oulala: 0
    // Ajoutez les autres champs nécessaires
  };

  let timeoutId;

  function saveData() {
    // Ici, vous définiriez la logique pour sauvegarder les données dans la base de données.
    console.log('Sauvegarde des données', data);
    
    // Par exemple, une requête fetch pour envoyer les données au serveur.
    // fetch('your-endpoint', {
    //   method: 'POST',
    //   headers: {
    //     'Content-Type': 'application/json'
    //   },
    //   body: JSON.stringify(data)
    // });
  }

  function scheduleSave() {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    timeoutId = setTimeout(saveData, 30000); // Déclenche saveData après 30s
  }

  onMount(() => {
    // Initialiser ou récupérer les données ici si nécessaire
  });
</script>

{#each Object.entries(data) as [name, value], i}
  <input
    type="text"
    bind:value={data[name]}
    on:input={scheduleSave}
    class={value === null ? 'disabled' : ''}
    disabled={value === null}
  />
{/each}