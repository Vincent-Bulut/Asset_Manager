
<script>
  let iframeRef; // Référence à l'iframe
  let iframeContent = ''; // Contenu du formulaire mis à jour

  // Fonction pour récupérer le contenu du formulaire dans l'iframe
  const getIframeContent = () => {
    if (iframeRef && iframeRef.contentDocument) {
      const iframeDoc = iframeRef.contentDocument; // Accéder au document de l'iframe
      
      // Parcourir tous les champs du formulaire et mettre à jour leurs valeurs
      const inputs = iframeDoc.querySelectorAll('input, textarea, select');
      inputs.forEach(input => {
        if (input.type === 'checkbox' || input.type === 'radio') {
          if (input.checked) {
            input.setAttribute('checked', 'true');
          } else {
            input.removeAttribute('checked');
          }
        } else {
          input.setAttribute('value', input.value);
        }
      });

      // Récupérer tout le HTML (formulaire avec données remplies)
      iframeContent = iframeDoc.documentElement.outerHTML;
      console.log('Contenu mis à jour de l\'iframe:', iframeContent);
    } else {
      console.error('Impossible d\'accéder au contenu de l\'iframe.');
    }
  };
</script>

<template>
  <div>
    <!-- Iframe contenant le formulaire -->
    <iframe
      bind:this={iframeRef}
      src="/path-to-your-html-file.html"
      style="width: 100%; height: 500px; border: 1px solid #ccc;"
    ></iframe>

    <!-- Bouton pour récupérer le contenu rempli -->
    <button on:click={getIframeContent}>Récupérer le contenu du formulaire rempli</button>

    <!-- Afficher le contenu récupéré -->
    {#if iframeContent}
      <h3>Contenu de l'iframe :</h3>
      <pre>{iframeContent}</pre>
    {/if}
  </div>
</template>