
function genererHTML() {
    console.log("test genererHTML");

    // Récupérer l'élément formulaire
    const form = document.getElementById("dac6-form");

    // Vérification si le formulaire existe
    if (!form) {
        console.error("Le formulaire 'dac6-form' est introuvable !");
        return;
    }

    // Cloner le formulaire pour ne pas modifier l'original
    const clonedForm = form.cloneNode(true);

    // Parcourir les champs du formulaire pour mettre à jour leurs valeurs
    const inputs = clonedForm.querySelectorAll("input, textarea, select");
    inputs.forEach((input) => {
        if (input.tagName === "TEXTAREA") {
            // Met à jour le contenu entre les balises pour <textarea>
            input.textContent = input.value;
        } else if (input.tagName === "SELECT") {
            // Parcourir les options pour définir `selected`
            const options = input.querySelectorAll("option");
            options.forEach((option) => {
                if (option.value === input.value) {
                    option.setAttribute("selected", "selected");
                } else {
                    option.removeAttribute("selected");
                }
            });
        } else {
            // Met à jour l'attribut "value" pour <input>
            input.setAttribute("value", input.value);
        }
    });

    // Récupérer le HTML final du formulaire avec outerHTML
    const htmlContent = clonedForm.outerHTML;

    console.log("HTML du formulaire :", htmlContent);

    // Envoyer le HTML au parent (iframe)
    window.parent.postMessage({ type: "htmlGenerated", html: htmlContent }, "*");
}