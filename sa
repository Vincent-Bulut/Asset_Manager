import os
from datetime import datetime

def add_timestamp_to_filename(file_name, timestamp_format="%Y%m%d_%H%M%S"):
    """
    Ajoute un horodateur au nom du fichier.
    
    :param file_name: Nom du fichier (ex : 'document.txt').
    :param timestamp_format: Format du timestamp (par défaut : 'YYYYMMDD_HHMMSS').
    :return: Nouveau nom de fichier avec le timestamp (ex : 'document_20241112_153045.txt').
    """
    # Récupérer le nom de base et l'extension
    base_name, ext = os.path.splitext(file_name)
    
    # Générer le timestamp
    timestamp = datetime.now().strftime(timestamp_format)
    
    # Créer le nouveau nom de fichier
    new_file_name = f"{base_name}_{timestamp}{ext}"
    
    return new_file_name

# Exemple d'utilisation
file_name = "mon_fichier.txt"
new_file_name = add_timestamp_to_filename(file_name)
print(new_file_name)  # Ex: mon_fichier_20241112_153045.txt